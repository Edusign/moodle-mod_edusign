define("mod_edusign/pages/sessions",["exports","core/ajax","core/str","core/notification","core/modal_delete_cancel","core/modal_events"],(function(_exports,_ajax,Str,_notification,_modal_delete_cancel,_modal_events){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),Str=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Str),_notification=_interopRequireDefault(_notification),_modal_delete_cancel=_interopRequireDefault(_modal_delete_cancel),_modal_events=_interopRequireDefault(_modal_events);const askRemoveSession=function(sessionId){return new Promise(((resolve,reject)=>_modal_delete_cancel.default.create({title:"Remove session",body:'\n                <p>Vous êtes sur le point de supprimer une session. Êtes-vous sûr de vouloir continuer ?</p>\n                <div class="form-check form-switch">\n                    <input class="form-check-input" type="checkbox" role="switch" id="removeOnEdusign" checked>\n                    <label class="form-check-label" for="removeOnEdusign">\n                        Supprimer aussi la feuille de présence sur Edusign ( Attention, action irréversible )\n                    </label>\n                </div>\n            ',show:!0,removeOnClose:!0}).then((modalInstance=>(modalInstance.getRoot().on(_modal_events.default.delete,(()=>{const removeOnEdusign=document.querySelector("#removeOnEdusign").checked;(function(sessionId){let removeOnEdusign=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _ajax.default.call([{methodname:"mod_edusign_remove_session",args:{sessionId:sessionId,withEdusignDelete:removeOnEdusign}}])[0]})(sessionId,removeOnEdusign).then(resolve).catch(reject)})),modalInstance)))))};_exports.init=async()=>{document.querySelectorAll(".remove-session").forEach((button=>{button.addEventListener("click",(async event=>{event.preventDefault();const sessionId=button.closest("tr").dataset.sessionId;await askRemoveSession(sessionId).then((async()=>window.location.reload())).catch((async data=>{_notification.default.addNotification({message:await Str.get_string("session_removed_error","mod_edusign",(null==data?void 0:data.error)||"An unknowed error has occured"),type:"error"})}))}))}))}}));

//# sourceMappingURL=sessions.min.js.map